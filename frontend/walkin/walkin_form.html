<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß - Buffet Queue</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- ‚úÖ 1. Import LIFF SDK (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ JS ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ) -->
    <script
      charset="utf-8"
      src="https://static.line-scdn.net/liff/edge/2/sdk.js"
    ></script>

    <style>
      body {
        background-color: #f8f9fa;
      }
      .pax-btn {
        height: 70px;
        font-size: 1.5rem;
        font-weight: bold;
        border: 2px solid #dee2e6;
        background-color: white;
        color: #495057;
        transition: all 0.2s;
      }
      .pax-btn:hover,
      .pax-btn.active {
        border-color: #0d6efd;
        background-color: #e7f1ff;
        color: #0d6efd;
        transform: scale(1.05);
      }
      /* Loading Overlay Style */
      #loadingOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <!-- üåÄ Loading Overlay (‡∏ï‡∏±‡∏ß‡∏´‡∏°‡∏∏‡∏ô‡πÜ) -->
    <div id="loadingOverlay">
      <div
        class="spinner-border text-primary"
        role="status"
        style="width: 3rem; height: 3rem"
      ></div>
      <p class="mt-3 text-muted fw-bold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö...</p>
    </div>

    <div class="container mt-5">
      <div class="card shadow border-0 rounded-4">
        <div class="card-body p-4 text-center">
          <h1 class="fw-bold text-primary mb-2">üç≤ Buffet Queue</h1>
          <p class="text-muted mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡πà‡∏≤‡∏ô</p>

          <form
            action="/walkin/submit"
            method="POST"
            onsubmit="return checkLimit(this);"
          >
            <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô -->
            <div class="mb-4">
              <label class="form-label fw-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏ó‡πà‡∏≤‡∏ô)</label>
              <div class="row row-cols-3 g-2">
                <div class="col">
                  <button
                    type="button"
                    class="btn w-100 pax-btn"
                    onclick="selectPax(1)"
                  >
                    1
                  </button>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn w-100 pax-btn"
                    onclick="selectPax(2)"
                  >
                    2
                  </button>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn w-100 pax-btn"
                    onclick="selectPax(3)"
                  >
                    3
                  </button>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn w-100 pax-btn"
                    onclick="selectPax(4)"
                  >
                    4
                  </button>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn w-100 pax-btn"
                    onclick="selectPax(5)"
                  >
                    5
                  </button>
                </div>
                <div class="col">
                  <button
                    type="button"
                    class="btn w-100 pax-btn"
                    onclick="selectPax(6)"
                  >
                    6+
                  </button>
                </div>
              </div>

              <!-- Input ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ) -->
              <input
                type="number"
                name="pax"
                max="20"
                id="paxInput"
                class="form-control mt-3 text-center fs-4"
                placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 20 ‡∏ó‡πà‡∏≤‡∏ô)"
                required
                min="1"
                style="display: none"
                oninput="if(this.value > 20) { alert('‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 20 ‡∏ó‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö'); this.value = 20; }"
              />
            </div>

            <!-- ‚úÖ Hidden Input ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ -->
            <input type="hidden" name="line_user_id" id="lineUserIdField" />
            <input type="hidden" name="branch_id" value="{{ branch_id }}" />

            <!-- ‚úÖ Alert ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ LINE -->
            <div
              id="lineStatus"
              class="alert alert-secondary py-1"
              style="font-size: 0.8rem; display: none"
            >
              ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE...
            </div>

            <button
              type="submit"
              class="btn btn-primary w-100 py-3 fs-4 rounded-pill shadow-sm"
            >
              ‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß üé´
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ‚úÖ 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Config ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ JS (Bridge) -->
    <script>
      window.ServerConfig = {
        branchId: "{{ branch_id }}",          // ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Python Jinja2
        liffId: "2008763658-K62w632B"         // ‡πÉ‡∏™‡πà LIFF ID ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
      };
    </script>

    <!-- ‚úÖ 3. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏ü‡∏•‡πå JS ‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ -->
    <script src="{{ url_for('static', filename='walkin/walkin_form.js') }}"></script>

  </body>
</html>